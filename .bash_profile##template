# vi: filetype=sh
# See helpful info at
# http://superuser.com/questions/183870/difference-between-bashrc-and-bash-profile/183980#183980

# Add homebrew to PATH *before* sourceing ~/.profile
# which adds my own paths
if [ "$(uname -s)" == "Darwin" ]; then
  if [ "$(uname -p)" == "arm" ]; then
    BREW_PREFIX=/opt/homebrew
  else
    BREW_PREFIX=/usr/local/Homebrew
  fi
  eval "$($BREW_PREFIX/bin/brew shellenv)"
fi

{% if yadm.distro == "openSUSE" %}
# I need to read the profile so that wayland env variables are
# available for QT applications (e.g., makemkv)
if [ -r ~/.profile ]; then
{% else %}
if [ -z "$TMUX" ] && [ -r ~/.profile ]; then
{% endif %}
  . ~/.profile
fi

bash_profile_os=~/.config/bash/bash_profile-os
# shellcheck disable=SC1090
[[ -f $bash_profile_os ]] && source "$bash_profile_os"

bash_profile_local=~/.config/bash/bash_profile-local
# shellcheck disable=SC1090
[[ -r $bash_profile_local ]] && source "$bash_profile_local"

# ---------------------------------------------------------------------------

{% if yadm.distro == "openSUSE" %}
# Normally we source .bashrc when the shell is interactive.
# On openSUSE, however, $HOME/.bashrc was sourced already by /etc/profile (!)
{% else %}
# Only read .bashrc when shell is interactive
case "$-" in *i*) if [ -r ~/.bashrc ]; then . ~/.bashrc; fi ;; esac
{% endif %}
