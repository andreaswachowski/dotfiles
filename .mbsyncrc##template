IMAPAccount andreas.wachowski@gmail.com
{% if yadm.os == "Linux" %}
CertificateFile /etc/ssl/certs/ca-certificates.crt
{% endif %}
{% if yadm.os == "Darwin" %}
CertificateFile /usr/local/etc/openssl/cert.pem
# Without AuthMechas, tries PLAIN-CLIENTTOKEN which yields
# Error: SASL(-7): invalid parameter supplied ...
AuthMechs PLAIN
{% endif %}
SSLType IMAPS
Host imap.gmail.com
User andreas.wachowski@gmail.com
PassCmd "gpg -d ~/.config/mbsync/passwords/andreas.wachowski@gmail.com.gpg"
PipelineDepth 50

IMAPStore gmail-remote
Account andreas.wachowski@gmail.com

MaildirStore gmail-local
# The trailing "/" is important
Path ~/Mail/gmail/
Inbox ~/Mail/gmail/INBOX
Flatten .

Channel gmail
Far :gmail-remote:
Near :gmail-local:
Create Both
Remove Near
Expunge Both
SyncState *
Patterns * !scriptlabels* !"[Google Mail]/All Mail"
